<div *ngIf="isApplicationAvailable">        
    <div>      
        <p-panel [style]="{'font-size':'12px'}" header="Organisation Details" [toggleable]= "true">
            <app-view-npo [npoId]="application.npoId">
            </app-view-npo>
            <div style="height: 10px;"></div>
            <app-view-profile 
            [npoId]="application.npoId" 
            [programId]="application.applicationPeriod.programmeId" 
            [subProgramId] = "application.applicationPeriod.subProgrammeId"
            [subProgramTypeId] = "application.applicationPeriod.subProgrammeTypeId"
            [source]="source"  
            >
            </app-view-profile>
        </p-panel>
    </div>
    <br>
    <div *ngIf="application.applicationPeriod.applicationTypeId == ApplicationTypeEnum.FA">
        <app-view-funding-application [npoId]="application.npoId" 
        [programId]="application.applicationPeriod.programmeId" 
        [subProgramId] = "application.applicationPeriod.subProgrammeId"
        [subProgramTypeId] = "application.applicationPeriod.subProgrammeTypeId"
        [source]="source">
        </app-view-funding-application>
    </div>
    <div *ngIf="application.applicationPeriod.applicationTypeId == ApplicationTypeEnum.QC">
        <app-view-funding-application [npoId]="application.npoId" 
        [programId]="application.applicationPeriod.programmeId" 
        [subProgramId] = "application.applicationPeriod.subProgrammeId"
        [subProgramTypeId] = "application.applicationPeriod.subProgrammeTypeId"
        [source]="source">
        </app-view-funding-application>
    </div>
    <div style="height: 10px;"></div>
    <div *ngIf="application.applicationPeriod.applicationTypeId == ApplicationTypeEnum.SP">
        <p-panel [style]="{'font-size':'12px'}" header="Workplan Information">
            <p-panel [style]="{'font-size':'12px'}" header="Objectives" *ngIf="isObjectivesAvailable">
                <p-table [rowHover]="true" [columns]="objectiveCols" [value]="objectives" styleClass="p-datatable-sm">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                                {{col.header}}
                            </th>
                            <th style="width: 7%;">Actions</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-rowData let-columns="columns">
                        <tr class="default-font">
                            <td>{{rowData.name}}</td>
                            <td>{{rowData.fundingSource}}</td>
                            <td>{{rowData.fundingPeriodStartDate}} to {{rowData.fundingPeriodEndDate}}</td>
                            <td>{{rowData.recipientType.name}}</td>
                            <td>{{rowData.budget}}</td>
                            <td style="text-align: center;">
                                <button pButton pRipple type="button" class="p-button-text action-button"
                                    icon="fa fa-info-circle" (click)="editObjective(rowData)" pTooltip="View"
                                    tooltipPosition="top"></button>
                                <button *ngIf="rowData.changesRequired != null" pButton pRipple type="button"
                                    class="p-button-text action-button" icon="fa fa-comments-o"
                                    (click)="viewComments(rowData, ServiceProvisionStepsEnum.Objectives)"
                                    pTooltip="Comments" tooltipPosition="top"></button>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-panel>
            <div style="height: 10px;"></div>
            <p-panel [style]="{'font-size':'12px'}" header="Activities" *ngIf="isActivitiesAvailable">
                <p-table [rowHover]="true" [columns]="activityCols" [value]="activities" styleClass="p-datatable-sm">
                    <ng-template pTemplate="header" let-columns>
                        <tr>
                            <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                                {{col.header}}
                            </th>
                            <th style="width: 7%;">Actions</th>
                        </tr>
                    </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                            <tr class="heading">
                                <td *ngIf="rowGroupMetadataActivities[rowIndex].itemExists === false" [attr.colspan]="7">
                                    <span><span class="p-text-bold">Objective:</span> {{rowData.objective.name}}</span>
                                </td>
                            </tr>
                            <tr class="default-font">
                                <td>{{rowData.activityList.name}}</td>
                                <td>{{rowData.activityType.name}}</td>
                                <td>{{rowData.timelineStartDate | date: 'yyyy-MM-dd'}} to {{rowData.timelineEndDate | date:
                                    'yyyy-MM-dd'}}</td>
                                <td>{{rowData.target}}</td>
                                <td>{{rowData.facilityListText}}</td>
                                <td style="text-align: center;">
                                    <button pButton pRipple type="button" class="p-button-text action-button"
                                        icon="fa fa-info-circle" (click)="editActivity(rowData)" pTooltip="View"
                                        tooltipPosition="top"></button>
                                    <button *ngIf="rowData.changesRequired != null" pButton pRipple type="button"
                                        class="p-button-text action-button" icon="fa fa-comments-o"
                                        (click)="viewComments(rowData, ServiceProvisionStepsEnum.Activities)"
                                        pTooltip="Comments" tooltipPosition="top"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-panel>
                <div style="height: 10px;"></div>
                <p-panel [style]="{'font-size':'12px'}" header="Sustainability Plans" *ngIf="isSustainabilityAvailable">
                    <p-table [rowHover]="true" [columns]="sustainabilityPlanCols" [value]="sustainabilityPlans"
                        styleClass="p-datatable-sm">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                                    {{col.header}}
                                </th>
                                <th style="width: 7%;">Actions</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                            <tr class="heading">
                                <td *ngIf="rowGroupMetadataSustainability[rowIndex].itemExists === false"
                                    [attr.colspan]="3">
                                    <span><span class="p-text-bold">Activity:</span> {{rowData.activity.activityList.name}}</span>
                                </td>
                            </tr>
                            <tr class="default-font">
                                <td>{{rowData.risk}}</td>
                                <td>{{rowData.mitigation}}</td>
                                <td style="text-align: center;">
                                    <button pButton pRipple type="button" class="p-button-text action-button"
                                        icon="fa fa-info-circle" (click)="editSustainabilityPlan(rowData)" pTooltip="View"
                                        tooltipPosition="top"></button>
                                    <button *ngIf="rowData.changesRequired != null" pButton pRipple type="button"
                                        class="p-button-text action-button" icon="fa fa-comments-o"
                                        (click)="viewComments(rowData, ServiceProvisionStepsEnum.Sustainability)"
                                        pTooltip="Comments" tooltipPosition="top"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-panel>
                <div style="height: 10px;"></div>
                <p-panel [style]="{'font-size':'12px'}" header="Resourcing" *ngIf="isResourcesAvailable">
                    <p-table [rowHover]="true" [columns]="resourceCols" [value]="resources" styleClass="p-datatable-sm">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                                    {{col.header}}
                                </th>
                                <th style="width: 7%;">Actions</th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                            <tr class="heading">
                                <td *ngIf="rowGroupMetadataResources[rowIndex].itemExists === false" [attr.colspan]="7">
                                    <span><span class="p-text-bold">Activity:</span> {{rowData.activity.activityList.name}}</span>
                                </td>
                            </tr>
                            <tr class="default-font">
                                <td *ngFor="let col of columns">
                                    <span>{{getCellData(rowData, col)}}</span>
                                </td>
                                <td style="text-align: center;">
                                    <button pButton pRipple type="button" class="p-button-text action-button"
                                        icon="fa fa-info-circle" (click)="editResource(rowData)" pTooltip="View"
                                        tooltipPosition="top"></button>
                                    <button *ngIf="rowData.changesRequired != null" pButton pRipple type="button"
                                        class="p-button-text action-button" icon="fa fa-comments-o"
                                        (click)="viewComments(rowData, ServiceProvisionStepsEnum.Resourcing)"
                                        pTooltip="Comments" tooltipPosition="top"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-panel>
                <div style="height: 10px;"></div>
                <p-panel [style]="{'font-size':'12px'}" header="Approvals">
                    <div *ngIf="mainReview">
                        <p>As the <span class="approval-details">Main Reviewer</span>, I hereby confirm that the information
                            captured on the application has been reviewed and accepted as accurate.</p>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Full Name</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{mainReview.createdUser.fullName}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Email Address</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{mainReview.createdUser.email}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Reviewed Date</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{mainReview.createdDateTime | date:
                                    'yyyy-MM-dd'}}</span>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div *ngIf="approveFromCoCT">
                        <p>On behalf of the <span class="approval-details">City of Cape Town</span>, I hereby confirm that
                            the information captured on the application has been reviewed and approved as accurate.</p>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Full Name</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromCoCT.createdUser.fullName}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Email Address</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromCoCT.createdUser.email}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Approved Date</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromCoCT.createdDateTime | date:
                                    'yyyy-MM-dd'}}</span>
                            </div>
                        </div>
                    </div>
                    <br>
                    <div *ngIf="approveFromDoH">
                        <p>On behalf of the <span class="approval-details">Department of Health</span>, I hereby confirm
                            that the information captured on the application has been reviewed and approved as accurate.</p>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Full Name</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromDoH.createdUser.fullName}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Email Address</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromDoH.createdUser.email}}</span>
                            </div>
                        </div>
                        <div class="p-grid">
                            <div class="p-col-fixed form-label">
                                <div class="box">
                                    <span class="mandatory-content">Approved Date</span>
                                </div>
                            </div>
                            <div class="p-col">
                                <span class="form-text approval-details">{{approveFromDoH.createdDateTime | date:
                                    'yyyy-MM-dd'}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="p-grid p-nogutter p-justify-end">
                        <p-button label="View History" (onClick)="viewAuditHistory()" icon="fa fa-history"></p-button>
                    </div>
                </p-panel>
                <div style="height: 10px;"></div>
                <p-panel [style]="{'font-size':'12px'}" header="SLA Documents">
                    <p-table [rowHover]="true" [value]="documents" styleClass="p-datatable-sm" [columns]="documentCols">
                        <ng-template pTemplate="header" let-columns>
                            <tr>
                                <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                                    {{col.header}}
                                </th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-document let-rowIndex="rowIndex">
                            <tr class="default-font">
                                <td style="text-align: center;">{{rowIndex + 1}}</td>
                                <td>{{document.name}}</td>
                                <td>{{document.documentType.name}}</td>
                                <td>{{document.fileSize}}</td>
                                <td>{{document.createdDateTime | date: 'yyyy-MM-dd'}}</td>
                                <td style="text-align: center;">
                                    <button pButton pRipple type="button"
                                        class="p-button-text p-button-success action-button" icon="fa fa-cloud-download"
                                        (click)="onDownloadDocument(document)" pTooltip="Download"
                                        tooltipPosition="top"></button>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-panel>
            </p-panel>
        </div>
    </div>

    <p-dialog header="Objective" [(visible)]="displayObjectiveDialog" [style]="{width: '75vw'}" [focusOnShow]="false"
        showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Objective Name</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="objective.name"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Objective Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea [(ngModel)]="objective.description"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Funding Source</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="objective.fundingSource"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Programme</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="1" [cols]="30" pInputTextarea [(ngModel)]="selectedProgrammesText"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Sub-Programme</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="1" [cols]="30" pInputTextarea [(ngModel)]="selectedSubProgrammesText"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Recipient Type</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="objective.recipientType"
                    [(ngModel)]="objective.recipientType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Funding Period</span>
                </div>
            </div>
            <div class="p-col">
                <p-calendar [(ngModel)]="objective.fundingPeriodStartDate" placeholder="Select a Start Date" inputId="time"
                    [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" appendTo="body" [style]="{'width':'47%'}"
                    [disabled]="true"></p-calendar>
                &nbsp; to &nbsp;
                <p-calendar [(ngModel)]="objective.fundingPeriodEndDate" placeholder="Select a End Date" inputId="time"
                    [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" appendTo="body" [style]="{'width':'46%'}"
                    [disabled]="true"></p-calendar>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Budget</span>
                </div>
            </div>
            <div class="p-col">
                <p-inputNumber [(ngModel)]="objective.budget" inputId="minmaxfraction" mode="decimal"
                    [minFractionDigits]="2" [maxFractionDigits]="2" [style]="{'width':'100%'}"
                    [disabled]="true"></p-inputNumber>
            </div>
        </div>
    </p-dialog>

    <p-dialog header="Activity" [(visible)]="displayActivityDialog" [style]="{width: '50vw'}" [focusOnShow]="false"
        showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <div class="p-grid" *ngIf="selectedObjective">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Objective</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="selectedObjective.name"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid" *ngIf="selectedObjective">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Objective Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea
                    [(ngModel)]="selectedObjective.description" [ngModelOptions]="{standalone: true}"
                    [disabled]="true"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Sub-Programme</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="1" [cols]="30" pInputTextarea [(ngModel)]="selectedSubProgrammesText"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Name</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="activity.name"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea [(ngModel)]="activity.description"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Type</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="activity.activityType"
                    [(ngModel)]="activity.activityType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Timeline</span>
                </div>
            </div>
            <div class="p-col">
                <p-calendar [(ngModel)]="activity.timelineStartDate" placeholder="Select a Start Date" inputId="time"
                    [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" appendTo="body" [style]="{'width':'47%'}"
                    [disabled]="true"></p-calendar>
                &nbsp; to &nbsp;
                <p-calendar [(ngModel)]="activity.timelineEndDate" placeholder="Select a End Date" inputId="time"
                    [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" appendTo="body" [style]="{'width':'46%'}"
                    [disabled]="true"></p-calendar>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Target</span>
                </div>
            </div>
            <div class="p-col">
                <p-inputNumber [(ngModel)]="activity.target" inputId="integeronly" [style]="{'width':'100%'}"
                    [disabled]="true"></p-inputNumber>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="non-mandatory-content">Indicators of Success</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="activity.successIndicator"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Facility and Community Place</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="1" [cols]="30" pInputTextarea [(ngModel)]="selectedFacilitiesText"
                    [ngModelOptions]="{standalone: true}" [disabled]="true" autoResize="autoResize"></textarea>
            </div>
        </div>
    </p-dialog>

    <p-dialog header="Sustainability Plan" [(visible)]="displaySustainabilityPlanDialog" [style]="{width: '50vw'}"
        [focusOnShow]="false" showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <div class="p-grid" *ngIf="selectedActivity">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Name</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="selectedActivity.activityList"
                    [(ngModel)]="selectedActivity.activityList.name" [ngModelOptions]="{standalone: true}"
                    [disabled]="true">
            </div>
        </div>
        <div class="p-grid" *ngIf="selectedActivity">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea
                    [(ngModel)]="selectedActivity.activityList.description" [ngModelOptions]="{standalone: true}"
                    [disabled]="true"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="non-mandatory-content">Sustainability Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea
                    [(ngModel)]="sustainabilityPlan.description" [ngModelOptions]="{standalone: true}"
                    [disabled]="true"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Risk</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="sustainabilityPlan.risk"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Mitigation</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="sustainabilityPlan.mitigation"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
    </p-dialog>

    <p-dialog header="Resource" [(visible)]="displayResourceDialog" [style]="{width: '50vw'}" [focusOnShow]="false"
        showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <div class="p-grid" *ngIf="selectedActivity">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Name</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="selectedActivity.activityList"
                    [(ngModel)]="selectedActivity.activityList.name" [ngModelOptions]="{standalone: true}"
                    [disabled]="true">
            </div>
        </div>
        <div class="p-grid" *ngIf="selectedActivity">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Activity Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea
                    [(ngModel)]="selectedActivity.activityList.description" [ngModelOptions]="{standalone: true}"
                    [disabled]="true"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Resource Type</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="resource.resourceType"
                    [(ngModel)]="resource.resourceType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Service Type</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="resource.serviceType"
                    [(ngModel)]="resource.serviceType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Allocation Type</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="resource.allocationType"
                    [(ngModel)]="resource.allocationType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Provided vs Required</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText *ngIf="resource.provisionType"
                    [(ngModel)]="resource.provisionType.name" [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Resource Name</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="resource.name"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="non-mandatory-content">Resource Description</span>
                </div>
            </div>
            <div class="p-col">
                <textarea class="form-text" [rows]="5" [cols]="30" pInputTextarea [(ngModel)]="resource.description"
                    [ngModelOptions]="{standalone: true}" [disabled]="true"></textarea>
            </div>
        </div>
        <div class="p-grid">
            <div class="p-col-fixed form-label">
                <div class="box">
                    <span class="mandatory-content">Number of Resources</span>
                </div>
            </div>
            <div class="p-col">
                <input type="text" class="form-text" pInputText [(ngModel)]="resource.numberOfResources"
                    [ngModelOptions]="{standalone: true}" [disabled]="true">
            </div>
        </div>
    </p-dialog>

    <p-dialog header="View Comments" [(visible)]="displayAllCommentDialog" [style]="{width: '70vw'}" [focusOnShow]="false"
        showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <p-table [rowHover]="true" [style]="{'border':'none'}" [columns]="commentCols" [paginator]="true" [rows]="10"
            [value]="filteredApplicationComments" styleClass="p-datatable-sm" [showCurrentPageReport]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                <tr class="default-font">
                    <td style="text-align: center;">{{rowIndex + 1}}</td>
                    <td>{{rowData.comment}}</td>
                    <td>{{rowData.createdUser.fullName}}</td>
                    <td>{{rowData.createdDateTime | date: 'yyyy-MM-dd'}}</td>
                </tr>
            </ng-template>
        </p-table>
    </p-dialog>

    <p-dialog header="Audit History" [(visible)]="displayHistory" [style]="{width: '50vw'}" [focusOnShow]="false"
        showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
        <p-table [rowHover]="true" [style]="{'border':'none'}" [columns]="auditCols" [paginator]="true" [rows]="10"
            [value]="applicationAudits" styleClass="p-datatable-sm" [showCurrentPageReport]="true"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
            <ng-template pTemplate="header" let-columns>
                <tr>
                    <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                        {{col.header}}
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
                <tr class="default-font">
                    <td style="text-align: center;">{{rowIndex + 1}}</td>
                    <td>{{rowData.status.name}}</td>
                    <td>{{rowData.createdUser.fullName}}</td>
                    <td>{{rowData.createdDateTime | date: 'yyyy-MM-dd'}}</td>
                </tr>
            </ng-template>
        </p-table>
    </p-dialog>

    <div class="content-section implementation">
        <p-confirmDialog #cd header="Confirmation" [style]="{width: '30vw'}" icon="pi pi-exclamation-triangle">
            <p-footer>
                <button type="button" pButton icon="fa fa-check" class="ui-button-info" label="Yes"
                    (click)="cd.accept()"></button>
                <button type="button" pButton icon="fa fa-times" class="ui-button-info" label="No"
                    (click)="cd.reject()"></button>
            </p-footer>
        </p-confirmDialog>
    </div>

<div *ngIf="headerTitle != 'view'">
    <div  *ngIf="this.IsAuthorized(PermissionsEnum.PreEvaluateOption) || this.IsAuthorized(PermissionsEnum.EvaluateOption) || this.IsAuthorized(PermissionsEnum.AdjudicateOption) || this.IsAuthorized(PermissionsEnum.ApproveOption)">
        <p-panel header="Pre-evaluate Funding Application" [style]="{'font-size':'12px'}" *ngIf="displayPreEvaluate()" id = "preEvaluatePanel">
            <div style="height: 10px;"></div>
            <div style="font-size: 14px;">
                An application must be pre-evaluated prior to recommendation to substantiate the recommendation outcome.
            </div>
            <div style="height: 10px;"></div>        
            <div>
                <p-table [value]="preEvaluationQuestionnaire" *ngIf="preEvaluationQuestionnaire" 
                [rowHover]="true" styleClass="p-datatable-striped" sortMode="single"  [disabled]="setDisable"
                dataKey="questionSectionName">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 5%; text-align: center;">#</th>
                        <th style="width: 40%;">Criteria</th>
                        <th>Compliance</th>
                        <th style="width: 25%;" *ngIf="hasComment(preEvaluationQuestionnaire)">Comment</th>
                        <th style="width: 7%;" *ngIf="hasDocument(preEvaluationQuestionnaire)">Evidence</th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-question let-rowIndex="rowIndex" let-expanded="expanded">
                    <tr *ngIf="updateRowGroupMetaData(preEvaluationQuestionnaire)[question.questionSectionName].index === rowIndex">
                        <td [attr.colspan]="getColspan(preEvaluationQuestionnaire, 5)">
                            <button type="button" pButton pRipple [pRowToggler]="question" class="p-button-text p-button-rounded p-button-plain p-mr-2" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                            <span class="p-text-bold p-ml-2"><b>Pre Evaluation</b></span>
                            <div class="pull-right"><span class="{{'product-badge status-' + getStatus(preEvaluationQuestionnaire, question)}}">{{getStatusText(preEvaluationQuestionnaire, question)}}</span></div>
                        </td>
                    </tr>   
                </ng-template>
                    <ng-template pTemplate="rowexpansion" let-question let-rowIndex="rowIndex">
                    <tr class="default-font">
                        <td style="text-align: center;">{{rowIndex + 1}}</td>
                        <td>{{question.questionName}}</td>
                        <td [pEditableColumn]="question" pEditableColumn>
                            <p-dropdown *ngIf="displayField(question)" [options]="getResponseOptions(question.responseTypeId)" 
                            optionLabel="name" [(ngModel)]="question.responseOption" [ngModelOptions]="{standalone: true}" 
                            placeholder="Select a Response" appendTo="body" [style]="{'width':'100%'}" 
                            (onChange)="onSaveResponse($event, question)" [disabled]="setDisable"></p-dropdown>
                        </td>
                        <td [pEditableColumn]="question" pEditableColumn *ngIf="hasComment(preEvaluationQuestionnaire)">
                            <textarea class="form-text" [disabled]="setDisable" *ngIf="question.hasComment" [rows]="1" pInputTextarea [(ngModel)]="question.comment"
                             [ngModelOptions]="{standalone: true}" (change)="onSaveComment($event, question)" (keydown)="onInputCommentChange(question)" 
                             [autoResize]="true" [disabled]="hasCapturedPreEvaluation"></textarea>
                        </td>
                        <td style="text-align: center;" *ngIf="hasDocument(preEvaluationQuestionnaire)">
                        </td>
                        <td style="text-align: center;">
                            <i *ngIf="displayField(question)" class="fa fa-circle {{getRagColour(question)}}" style="font-size: 1rem"></i>
                        </td>
                        <td style="text-align: center;">
                            <p-button *ngIf="displayField(question)" tooltipPosition="left" pTooltip="View History" 
                            (onClick)="onSelectViewHistory(question)" icon="pi pi-eye" class="action-button"></p-button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="footer">
                    <tr>
                        <td colspan="6">
                            <p-panel [disabled]="setDisable" header="Programme Official Declaration" [style]="{'font-size':'12px'}" *ngIf="displayPreEvaluate()">
                                <p><span style="color: rgb(51, 51, 51);">I, the undersigned Programme Official, certify that: </span></p>
                                <ul><li>I have received the above Funding Application for verification.</li><li>
                                <span style="color: rgb(51, 51, 51);">I confirm that I have verified that this application is </span>complete.</li></ul>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="mandatory-content">Comments</span>                        
                                        </div>                    
                                    </div>
                                    <div class="p-col-9">
                                        <textarea class="form-text" [disabled]="setDisable" [rows]="3" pInputTextarea [(ngModel)]="capturedPreEvaluationComment" [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="hasCapturedEvaluation"></textarea>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span><b>Tick if happy to sign off</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <div>
                                            <input type="checkbox" id="chkRecommendation" [disabled]="setDisable" [(ngModel)]="isChecked" (change)="onCheckboxChange($event)">
                                        </div>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="non-mandatory-content"><b>Signed By:</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <span>{{signedByUser}}</span>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="non-mandatory-content"><b>Verification Date:</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <span>{{verificationDate | date: 'yyyy-MM-dd'}}</span>
                                    </div>
                                </div>
                            </p-panel>
                        </td>
                    </tr>
                    <tr *ngIf="!hasCapturedPreEvaluation">
                        <td colspan="6" style="text-align: right;">
                            <div *ngIf="!hasCapturedPreEvaluation">
                                <button pButton type="button" label="Submit" icon="fa fa-floppy-o"
                                [disabled]="disableElement(preEvaluationQuestionnaire, 'PreEvaluation')" 
                                (click)="submit(preEvaluationQuestionnaire, QuestionCategoryEnum.PreEvaluation)"
                               ></button>                                
                            </div>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr class="default-font">
                        <td [attr.colspan]="getColspan(preEvaluationQuestionnaire, 5)" style="text-align: center;">No results found</td>
                    </tr>
                </ng-template>
                </p-table>
            </div>
        </p-panel> 
        <br>
    </div>
    <div *ngIf="this.IsAuthorized(PermissionsEnum.EvaluateOption) || this.IsAuthorized(PermissionsEnum.AdjudicateOption) || this.IsAuthorized(PermissionsEnum.ApproveOption)">
        <div *ngIf="captureEvaluation()">
            <p-panel header="Evaluate Funding Application" *ngIf="displayEvaluation()" [style]="{'font-size':'12px'}" id = "evaluatePanel">
                <p-panel>
                    <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                        <p><span style="color: rgb(51, 51, 51);">
                            <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                            <p> I declare that:</p>
                            <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                        </span></p>
                        <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="mandatory-content">Accept</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>
                                <input type="checkbox" id="chkEvalDeclaration" [(ngModel)]="isEvalDeclarationChecked" 
                                [disabled]="isEvaluationDisable" (change)="onEvlCheckboxChange($event)">
                            </span>
                        </div>
                    </div>
                </p-panel>
                <p-panel id = "pnlEvaluation">
                    <p-table [value]="evaluationQuestionnaire" *ngIf="evaluationQuestionnaire" [rowHover]="true" 
                    styleClass="p-datatable-striped" sortMode="single" dataKey="questionSectionName">
                        <ng-template pTemplate="header">
                            <tr>
                                <th style="width: 5%; text-align: center;">#</th>
                                <th style="width: 45%;">Element / Question</th>
                                <th style="width: 10%;">Value</th>
                                <th style="width: 25%;" *ngIf="hasComment(evaluationQuestionnaire)">Comment</th>
                                <th style="width: 7%;" *ngIf="hasDocument(evaluationQuestionnaire)">Evidence</th>
                                <th style="width: 8%;" colspan="2"></th>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="body" let-question let-rowIndex="rowIndex" let-expanded="expanded">
                            <tr *ngIf="updateRowGroupMetaData(evaluationQuestionnaire)[question.questionSectionName].index === rowIndex">
                                <td [attr.colspan]="getColspan(evaluationQuestionnaire, 7)">
                                    <button type="button" pButton pRipple [pRowToggler]="question" class="p-button-text p-button-rounded p-button-plain p-mr-2" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                                    <span class="p-text-bold p-ml-2"><b>{{question.questionSectionName}}</b></span>
                                    <div class="pull-right"><span class="{{'product-badge status-' + getStatus(evaluationQuestionnaire, question)}}">{{getStatusText(evaluationQuestionnaire, question)}}</span></div>
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="rowexpansion" let-question let-rowIndex="rowIndex" >
                            <tr class="default-font">
                                <td style="text-align: center;">{{rowIndex + 1}}</td>
                                <td>{{question.questionName}}</td>
                                <td [pEditableColumn]="question" pEditableColumn>
                                    <p-dropdown *ngIf="displayField(question)" [options]="getResponseOptions(question.responseTypeId)"
                                        optionLabel="systemName" [(ngModel)]="question.responseOption" [ngModelOptions]="{standalone: true}"
                                        placeholder="Select a Response" appendTo="body" [style]="{'width':'100%'}" 
                                        (onChange)="onSaveResponse($event, question)" [disabled]="isEvaluationDisable"></p-dropdown>
                                </td>
                                <td [pEditableColumn]="question" pEditableColumn *ngIf="hasComment(evaluationQuestionnaire)">
                                    <textarea class="form-text" *ngIf="question.hasComment" [rows]="1" pInputTextarea [(ngModel)]="question.comment" 
                                    [ngModelOptions]="{standalone: true}" (change)="onSaveComment($event, question)" (keydown)="onInputCommentChange(question)" 
                                    [autoResize]="true"   [disabled]="isEvaluationDisable"></textarea>
                                </td>
                              
                                <td style="text-align: center;">
                                    <i *ngIf="displayField(question)" class="fa fa-circle {{getRagColour(question)}}" style="font-size: 1rem"></i>
                                </td>
                                <td style="text-align: center;">
                                    <p-button *ngIf="displayField(question)" tooltipPosition="left" pTooltip="View History" 
                                    (onClick)="onSelectViewHistory(question)" icon="pi pi-eye" class="action-button"></p-button>
                                </td>
                            </tr>
                        </ng-template>
                        <ng-template pTemplate="emptymessage">
                            <tr class="default-font">
                                <td [attr.colspan]="getColspan(evaluationQuestionnaire, 7)" style="text-align: center;">No results found</td>
                            </tr>
                        </ng-template>
                       <ng-template pTemplate="footer" *ngIf="hasWeighting(evaluationQuestionnaire)">
                            <tr>
                                <td colspan="2"><span style="font-weight: bold;">Total Score</span></td>
                                <td [attr.colspan]="getColspan(evaluationQuestionnaire, 3)"><span style="font-weight: bold;">{{getAverageScoreTotal(evaluationQuestionnaire)}}</span></td>
                                <td colspan="2"></td>
                            </tr>
                        </ng-template>
                    </p-table>
                </p-panel>
                <div style="height: 10px;"></div>
                <p-panel id = "pnlEvaluation1">
                    <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Comments</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <textarea class="form-text" [rows]="3" pInputTextarea 
                            [(ngModel)]="capturedEvaluationComment" [ngModelOptions]="{standalone: true}" 
                            [autoResize]="true" [disabled]="hasCapturedEvaluation"></textarea>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="mandatory-content">Recommend Application</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <p-dropdown class="form-text"  defaultLabel="Choose the option" [options]="evaluationStatuses" 
                            placeholder="Select a Status" optionLabel="name" 
                            [(ngModel)]="selectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" 
                            [disabled]="hasCapturedEvaluation"></p-dropdown>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Evaluated By</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>{{evalSignedByUser}}</span>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Evaluated Date</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>{{evalVerificationDate | date: 'yyyy-MM-dd'}}</span>
                        </div>
                    </div>
                    <div class="p-grid p-nogutter p-justify-end" *ngIf="!hasCapturedEvaluation">
                        <button pButton type="button" label="Submit" icon="fa fa-floppy-o" 
                        [disabled]="disableEvaluateElement(evaluationQuestionnaire)"
                        (click)="submit(evaluationQuestionnaire,  QuestionCategoryEnum.Evaluation)"></button>
                    </div>
                </p-panel>
            </p-panel> 
        </div>
    </div>
    <div *ngIf="this.IsAuthorized(PermissionsEnum.AdjudicateOption) || this.IsAuthorized(PermissionsEnum.ApproveOption)">
        <div *ngIf="captureAdjudicate()">
            <p-panel header="Adjudicate Funding Application" *ngIf="displayAdjudicate()"  [style]="{'font-size':'12px'}" id = "adjudicatePanel">
                <p-panel>
                    <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                        <p><span style="color: rgb(51, 51, 51);">
                            <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                            <p> I declare that:</p>
                            <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                        </span></p>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="mandatory-content">Accept</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>
                                <input type="checkbox" id="chkAdjDeclaration" [(ngModel)]="isAdjDeclarationChecked" 
                                [disabled]="isAdjudicationDisable" (change)="onAdjCheckboxChange($event)">
                            </span>
                        </div>
                    </div>
                </p-panel>
                <div style="height: 10px;"></div>
                    <p-panel id="pnlAdjudication" *ngIf = "displayAdjudicate()">
                        <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                        <div class="p-grid">
                            <div class="p-col-3 form-label">
                                <div class="box">
                                    <span class="non-mandatory-content">Comments</span>
                                </div>
                            </div>
                            <div class="p-col-9">
                                <textarea class="form-text" [rows]="3" pInputTextarea [(ngModel)]="capturedAdjudicationComment" 
                                [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="isAdjudicationDisable"></textarea>
                            </div>
                        </div>
                        <div style="height: 10px;"></div>
                        <div class="p-grid">
                            <div class="p-col-3 form-label">
                                <div class="box">
                                    <span class="mandatory-content">Recommend Application</span>
                                </div>
                            </div>
                            <div class="p-col-9">
                                <p-dropdown class="form-text" [options]="adjudicationStatuses" placeholder="Select a Status" optionLabel="name" 
                                [(ngModel)]="adjSelectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" 
                                [disabled]="isAdjudicationDisable" appendTo="body"></p-dropdown>
                            </div>
                        </div>
                        <div style="height: 10px;"></div>
                        <div class="p-grid">
                            <div class="p-col-3 form-label">
                                <div class="box">
                                    <span class="non-mandatory-content">Adjudicated By</span>
                                </div>
                            </div>
                            <div class="p-col-9">
                                <span>{{adjSignedByUser}}</span>
                            </div>
                        </div>
                        <div style="height: 10px;"></div>
                        <div class="p-grid">
                            <div class="p-col-3 form-label">
                                <div class="box">
                                    <span class="non-mandatory-content">Adjudicated Date</span>
                                </div>
                            </div>
                            <div class="p-col-9">
                                <span>{{adjVerificationDate | date: 'yyyy-MM-dd'}}</span>
                            </div>
                        </div>
                        <div class="p-grid p-nogutter p-justify-end" *ngIf="!hasCapturedAdjudication">
                            <button pButton type="button" label="Submit" icon="fa fa-floppy-o"
                            (click)="submit(evaluationQuestionnaire,  QuestionCategoryEnum.Adjudication)" [disabled]="isAdjudicationDisable"></button>
                        </div>
                    </p-panel>
            </p-panel>
        </div>
    </div>
    <br>
    <div *ngIf="this.IsAuthorized(PermissionsEnum.ApproveOption)">
        <div *ngIf="displayApprove()">
            <p-panel *ngIf = "displayApprove()" [style]="{'font-size':'12px'}" header="Approve Funding Application" id = "approvePanel">
                <p-panel>
                    <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                        <p><span style="color: rgb(51, 51, 51);">
                            <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                            <p> I declare that:</p>
                            <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                        </span></p>
                        <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="mandatory-content">Accept</span>
                            </div>
                        </div>
                        <div class="p-col-9"> 
                            <span>
                                <input type="checkbox" id="chkAprDeclaration" [(ngModel)]="isAprDeclarationChecked"
                                [disabled]="isApprovalDisable" (change)="onAprCheckboxChange($event)">
                            </span>
                        </div>
                    </div>
                </p-panel>
                <p-panel id ="pnlApproval">
                    <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Comments</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <textarea class="form-text" [rows]="3" pInputTextarea [(ngModel)]="capturedApprovalComment"
                            [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="isApprovalDisable"></textarea>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="mandatory-content">Recommend Application</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <p-dropdown class="form-text" defaultLabel="Choose the option" [options]="approvalStatuses" 
                            placeholder="Select a Status" optionLabel="name" [disabled]="isApprovalDisable"
                            [(ngModel)]="aprSelectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body"></p-dropdown>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Approved By</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>{{aprSignedByUser}}</span>
                        </div>
                    </div>
                    <div style="height: 10px;"></div>
                    <div class="p-grid">
                        <div class="p-col-3 form-label">
                            <div class="box">
                                <span class="non-mandatory-content">Approved Date</span>
                            </div>
                        </div>
                        <div class="p-col-9">
                            <span>{{aprVerificationDate | date: 'yyyy-MM-dd'}}</span>
                        </div>
                    </div>
                    <div class="p-grid p-nogutter p-justify-end" *ngIf="!hasCapturedApproval">
                        <button pButton type="button" label="Submit" icon="fa fa-floppy-o" [disabled]="isApprovalDisable"
                        (click)="submit(evaluationQuestionnaire,  QuestionCategoryEnum.Approval)"></button>
                    </div>
                </p-panel>
            </p-panel>
        </div>
    </div>
</div>

<!--
<div *ngIf="headerTitle == 'view'">
    <div *ngIf="displayPreEvaluate()">
        <p-panel header="Pre-evaluate Funding Application" [style]="{'font-size':'12px'}" *ngIf="displayPreEvaluate() && capturedResponses" id = "preEvaluatePanel">
            <div style="height: 10px;"></div>
            <div style="font-size: 14px;">
                An application must be pre-evaluated prior to recommendation to substantiate the recommendation outcome.
            </div>
            <div style="height: 10px;"></div>        
            <div>
                <p-table [value]="preEvaluationQuestionnaire" *ngIf="preEvaluationQuestionnaire" 
                [rowHover]="true" styleClass="p-datatable-striped" sortMode="single"  [disabled]="setDisable"
                dataKey="questionSectionName">
                <ng-template pTemplate="header">
                    <tr>
                        <th style="width: 5%; text-align: center;">#</th>
                        <th style="width: 40%;">Criteria</th>
                        <th>Compliance</th>
                        <th style="width: 25%;" *ngIf="hasComment(preEvaluationQuestionnaire)">Comment</th>
                        <th style="width: 7%;" *ngIf="hasDocument(preEvaluationQuestionnaire)">Evidence</th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-question let-rowIndex="rowIndex" let-expanded="expanded">
                    <tr *ngIf="updateRowGroupMetaData(preEvaluationQuestionnaire)[question.questionSectionName].index === rowIndex">
                        <td [attr.colspan]="getColspan(preEvaluationQuestionnaire, 5)">
                            <button type="button" pButton pRipple [pRowToggler]="question" class="p-button-text p-button-rounded p-button-plain p-mr-2" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                            <span class="p-text-bold p-ml-2"><b>Pre Evaluation</b></span>
                            <div class="pull-right"><span class="{{'product-badge status-' + getStatus(preEvaluationQuestionnaire, question)}}">{{getStatusText(preEvaluationQuestionnaire, question)}}</span></div>
                        </td>
                    </tr>   
                </ng-template>
                    <ng-template pTemplate="rowexpansion" let-question let-rowIndex="rowIndex">
                    <tr class="default-font">
                        <td style="text-align: center;">{{rowIndex + 1}}</td>
                        <td>{{question.questionName}}</td>
                        <td [pEditableColumn]="question" pEditableColumn>
                            <p-dropdown *ngIf="displayField(question)" [options]="getResponseOptions(question.responseTypeId)" 
                            optionLabel="name" [(ngModel)]="question.responseOption" [ngModelOptions]="{standalone: true}" 
                            placeholder="Select a Response" appendTo="body" [style]="{'width':'100%'}" 
                            (onChange)="onSaveResponse($event, question)" [disabled]="true"></p-dropdown>
                        </td>
                        <td [pEditableColumn]="question" pEditableColumn *ngIf="hasComment(preEvaluationQuestionnaire)">
                            <textarea class="form-text" [disabled]="true" *ngIf="question.hasComment" [rows]="1" pInputTextarea [(ngModel)]="question.comment" [ngModelOptions]="{standalone: true}" (change)="onSaveComment($event, question)" (keydown)="onInputCommentChange(question)" [autoResize]="true" [disabled]="hasCapturedPreEvaluation"></textarea>
                        </td>
                        <td style="text-align: center;" *ngIf="hasDocument(preEvaluationQuestionnaire)">
                        </td>
                        <td style="text-align: center;">
                            <i *ngIf="displayField(question)" class="fa fa-circle {{getRagColour(question)}}" style="font-size: 1rem"></i>
                        </td>
                        <td style="text-align: center;">
                            <p-button *ngIf="displayField(question)" tooltipPosition="left" pTooltip="View History" (onClick)="onSelectViewHistory(question)" icon="pi pi-eye" class="action-button"></p-button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="footer">
                    <tr>
                        <td colspan="6">
                            <p-panel [disabled]="setDisable" header="Programme Official Declaration" [style]="{'font-size':'12px'}" *ngIf="displayPreEvaluate()">
                                <p><span style="color: rgb(51, 51, 51);">I, the undersigned Programme Official, certify that: </span></p>
                                <ul><li>I have received the above Funding Application for verification.</li><li>
                                <span style="color: rgb(51, 51, 51);">I confirm that I have verified that this application is </span>complete.</li></ul>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="mandatory-content">Comments</span>                        
                                        </div>                    
                                    </div>
                                    <div class="p-col-9">
                                        <textarea class="form-text" [disabled]="true" [rows]="3" pInputTextarea [(ngModel)]="capturedPreEvaluationComment" [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="hasCapturedEvaluation"></textarea>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span><b>Tick if happy to sign off</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <span>
                                            <input type="checkbox" id="chkRecommendation" [disabled]="true" [(ngModel)]="isChecked" (change)="onCheckboxChange($event)">
                                        </span>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="non-mandatory-content"><b>Signed By:</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <span>{{signedByUser}}</span>
                                    </div>
                                </div>
                                <div style="height: 10px;"></div>
                                <div class="p-grid">
                                    <div class="p-col-3 form-label">
                                        <div class="box">
                                            <span class="non-mandatory-content"><b>Verification Date:</b></span>
                                        </div>
                                    </div>
                                    <div class="p-col-9">
                                        <span>{{verificationDate | date: 'yyyy-MM-dd'}}</span>
                                    </div>
                                </div>
                            </p-panel>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr class="default-font">
                        <td [attr.colspan]="getColspan(preEvaluationQuestionnaire, 5)" style="text-align: center;">No results found</td>
                    </tr>
                </ng-template>
                </p-table>
            </div>
        </p-panel> 
        <br>
    </div>
    <div *ngIf="captureEvaluation()">
        <p-panel header="Evaluate Funding Application" *ngIf="displayEvaluation() && capturedResponses"  [style]="{'font-size':'12px'}" id = "evaluatePanel">
            <p-panel>
                <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                    <p><span style="color: rgb(51, 51, 51);">
                        <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                        <p> I declare that:</p>
                        <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                    </span></p>
                    <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="mandatory-content">Accept</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>
                            <input [disabled]="true" type="checkbox" id="chkEvalDeclaration" 
                            [(ngModel)]="isEvalDeclarationChecked">
                        </span>
                    </div>
                </div>
            </p-panel>
            <p-panel>
                <p-table [value]="evaluationQuestionnaire" *ngIf="evaluationQuestionnaire" [rowHover]="true" 
                styleClass="p-datatable-striped" sortMode="single" dataKey="questionSectionName">
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="width: 5%; text-align: center;">#</th>
                            <th style="width: 45%;">Element / Question</th>
                            <th style="width: 10%;">Value</th>
                            <th style="width: 25%;" *ngIf="hasComment(evaluationQuestionnaire)">Comment</th>
                            <th style="width: 7%;" *ngIf="hasDocument(evaluationQuestionnaire)">Evidence</th>
                            <th style="width: 8%;" colspan="2"></th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-question let-rowIndex="rowIndex" let-expanded="expanded">
                        <tr *ngIf="updateRowGroupMetaData(evaluationQuestionnaire)[question.questionSectionName].index === rowIndex">
                            <td [attr.colspan]="getColspan(evaluationQuestionnaire, 7)">
                                <button type="button" pButton pRipple [pRowToggler]="question" class="p-button-text p-button-rounded p-button-plain p-mr-2" [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></button>
                                <span class="p-text-bold p-ml-2"><b>{{question.questionSectionName}}</b></span>
                                <div class="pull-right"><span class="{{'product-badge status-' + getStatus(evaluationQuestionnaire, question)}}">{{getStatusText(evaluationQuestionnaire, question)}}</span></div>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="rowexpansion" let-question let-rowIndex="rowIndex" >
                        <tr class="default-font">
                            <td style="text-align: center;">{{rowIndex + 1}}</td>
                            <td>{{question.questionName}}</td>
                            <td [pEditableColumn]="question" pEditableColumn>
                                <p-dropdown *ngIf="displayField(question)" [options]="getResponseOptions(question.responseTypeId)"
                                    optionLabel="systemName" [(ngModel)]="question.responseOption" [ngModelOptions]="{standalone: true}"
                                    placeholder="Select a Response" appendTo="body" [style]="{'width':'100%'}" 
                                    (onChange)="onSaveResponse($event, question)" [disabled]="true"></p-dropdown>
                            </td>
                            <td [pEditableColumn]="question" pEditableColumn *ngIf="hasComment(evaluationQuestionnaire)">
                                <textarea class="form-text" *ngIf="question.hasComment" [rows]="1" pInputTextarea [(ngModel)]="question.comment" 
                                [ngModelOptions]="{standalone: true}" (change)="onSaveComment($event, question)" (keydown)="onInputCommentChange(question)" 
                                [autoResize]="true" [disabled]="true"></textarea>
                            </td>
                            <td style="text-align: center;">
                                <i *ngIf="displayField(question)" class="fa fa-circle {{getRagColour(question)}}" style="font-size: 1rem"></i>
                            </td>
                            <td style="text-align: center;">
                                <p-button *ngIf="displayField(question)" tooltipPosition="left" pTooltip="View History" 
                                (onClick)="onSelectViewHistory(question)" icon="pi pi-eye" class="action-button"></p-button>
                            </td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr class="default-font">
                            <td [attr.colspan]="getColspan(evaluationQuestionnaire, 7)" style="text-align: center;">No results found</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="footer"  *ngIf="!hasWeighting(evaluationQuestionnaire)">
                        <tr>
                            <td colspan="2"><span style="font-weight: bold;">Total Score</span></td>
                            <td [attr.colspan]="getColspan(evaluationQuestionnaire, 3)"><span style="font-weight: bold;">{{getAverageScoreTotal(evaluationQuestionnaire)}}</span></td>
                            <td colspan="2"></td>
                        </tr>
                    </ng-template>
                </p-table>
            </p-panel>
            <div style="height: 10px;"></div>
            <p-panel>
                <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Comments</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <textarea class="form-text" [rows]="3" pInputTextarea 
                        [(ngModel)]="capturedEvaluationComment" [ngModelOptions]="{standalone: true}" 
                        [autoResize]="true" [disabled]="true"></textarea>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="mandatory-content">Recommend Application</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <p-dropdown class="form-text"  defaultLabel="Choose the option" [options]="evaluationStatuses" 
                        placeholder="Select a Status" optionLabel="name" 
                        [(ngModel)]="selectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" 
                        [disabled]="true"></p-dropdown>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Evaluated By</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{evalSignedByUser}}</span>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Evaluated Date</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{evalVerificationDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                </div>
            </p-panel>
        </p-panel> 
    </div>
    <div *ngIf="captureAdjudicate()">
    <p-panel header="Adjudicate Funding Application" [style]="{'font-size':'12px'}" id = "adjudicatePanel">
        <p-panel>
            <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                <p><span style="color: rgb(51, 51, 51);">
                    <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                    <p> I declare that:</p>
                    <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                </span></p>
            <div class="p-grid">
                <div class="p-col-3 form-label">
                    <div class="box">
                        <span class="mandatory-content">Accept</span>
                    </div>
                </div>
                <div class="p-col-9">
                    <span>
                        <input type="checkbox" id="chkAdjDeclaration" [(ngModel)]="isAdjDeclarationChecked" 
                        [disabled]="true">
                    </span>
                </div>
            </div>
        </p-panel>
        <div style="height: 10px;"></div>
            <p-panel id = "pnlAdjudication">
                <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Comments</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <textarea class="form-text" [rows]="3" pInputTextarea [(ngModel)]="capturedAdjudicationComment" 
                        [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="true"></textarea>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid"> 
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="mandatory-content">Recommend Application</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <p-dropdown class="form-text" [options]="adjudicationStatuses" placeholder="Select a Status" optionLabel="name" 
                        [(ngModel)]="adjSelectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" 
                        [disabled]="true" appendTo="body"></p-dropdown>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Adjudicated By</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{adjSignedByUser}}</span>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Adjudicated Date</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{adjVerificationDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                </div>
            </p-panel>
        </p-panel>
    </div>
    <br>
    <div *ngIf="captureApprove()">
        <p-panel [style]="{'font-size':'12px'}" header="Approve Funding Application">
            <p-panel>
                <p><span style="color: rgb(51, 51, 51);"><b>Declaration</b></span></p>
                    <p><span style="color: rgb(51, 51, 51);">
                        <p> I, the undersigned, accept that the assessments, recommendation and, discussions in regard to the&nbsp;assessment and/or adjudication and/or allocation with respect to applications by NPOs for transfer funding are confidential and I, undertake hereby not to disclose anything to this effect.</p>
                        <p> I declare that:</p>
                        <p> I will not deliberately favour or prejudice anybody in the decision-making process of and, the actual assessment and/or adjudication of NPO applications for transfer funding nor any allocations with respect to such funding; and During the consideration, acceptance or allocation of transfer funding,&nbsp;no person employed by the Provincial Government or any person who acts on behalf of the Provincial Government may exercise or use his discretion, official powers or position in such a manner as to obtain for himself/herself or for any other person or legal person an unlawful or unauthorized advantage or an advantage that serves to unlawfully prejudice the interests of the Provincial Government or any other person or legal person.</p>	
                    </span></p>
                    <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="mandatory-content">Accept</span>
                        </div>
                    </div>
                    <div class="p-col-9"> 
                        <span>
                            <input type="checkbox" id="chkAprDeclaration" [(ngModel)]="isAprDeclarationChecked"
                            [disabled]="true">
                        </span>
                    </div>
                </div>
            </p-panel>
            <p-panel id = "pnlApproval">
                <p>I, the undersigned, hereby declare that my actions pertaining to the consideration of funding for proposals are always of a neutral nature and that I will recuse myself from the committee sitting should an application within my personal interest be discussed, i.e. (immediate family, friends and social contacts).</p>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Comments</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <textarea class="form-text" [rows]="3" pInputTextarea [(ngModel)]="capturedApprovalComment"
                        [ngModelOptions]="{standalone: true}" [autoResize]="true" [disabled]="true"></textarea>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="mandatory-content">Recommend Application</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <p-dropdown class="form-text" defaultLabel="Choose the option" [options]="approvalStatuses" 
                        placeholder="Select a Status" optionLabel="name" [disabled]="true"
                        [(ngModel)]="aprSelectedStatus" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body"></p-dropdown>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Approved By</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{aprSignedByUser}}</span>
                    </div>
                </div>
                <div style="height: 10px;"></div>
                <div class="p-grid">
                    <div class="p-col-3 form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Approved Date</span>
                        </div>
                    </div>
                    <div class="p-col-9">
                        <span>{{aprVerificationDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                </div>
            </p-panel>
        </p-panel>
    </div>
</div>
-->

<p-dialog header="History" 
          [(visible)]="displayHistoryDialog" 
          [style]="{width: '70vw'}" 
          [focusOnShow]="false"
          showEffect="fade"
          [transitionOptions]="'0ms'"
          [modal]="true"
          [maximizable]="false"
          [draggable]="false"
          [resizable]="false">
    <p-table [value]="responseHistory" styleClass="p-datatable-sm" [columns]="historyCols" [paginator]="true" [rows]="10" [showCurrentPageReport]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]" paginatorDropdownAppendTo="body">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                    {{col.header}}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns">
            <tr class="default-font">
                <td *ngFor="let col of columns">
                    <span>{{getCellData(rowData, col)}}</span>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr class="default-font">
                <td colspan="4" style="text-align: center;">No results found</td>
            </tr>
        </ng-template>
    </p-table>
</p-dialog>

<p-dialog header="Audit History" [(visible)]="displayHistory" [style]="{width: '50vw'}" [focusOnShow]="false"
    showEffect="fade" [transitionOptions]="'0ms'" [modal]="true">
    <p-table [rowHover]="true" [style]="{'border':'none'}" [columns]="auditCols" [paginator]="true" [rows]="10"
        [value]="applicationAudits" styleClass="p-datatable-sm" [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries">
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th *ngFor="let col of columns" [ngStyle]="{'width': col.width}">
                    {{col.header}}
                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-columns="columns" let-rowIndex="rowIndex">
            <tr class="default-font">
                <td style="text-align: center;">{{rowIndex + 1}}</td>
                <td>{{rowData.status.name}}</td>
                <td>{{rowData.createdUser.fullName}}</td>
                <td>{{rowData.createdDateTime | date: 'yyyy-MM-dd'}}</td>
            </tr>
        </ng-template>
    </p-table>
</p-dialog>