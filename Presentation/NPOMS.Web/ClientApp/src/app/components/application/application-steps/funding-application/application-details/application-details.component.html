<p-panel [toggleable]="false" [style]="{'font-size':'12px'}" header="Application Details" >
    <p-messages [(value)]="validationErrors" [closable]="false" [enableService]="false"></p-messages>
    <div style="height: 10px;"></div>
    <p-panel [toggleable]="true" [style]="{'font-size':'12px'}" header="Funding Application Information">
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Department</label>
                <p-dropdown [options]="departments" placeholder="Select a Department" optionLabel="name" [(ngModel)]="selectedDepartment" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="departmentChange($event.value)" #department="ngModel" [ngClass]="{'ng-dirty': (department.invalid && validated) || (department.dirty && department.invalid)}" required [disabled]="true"></p-dropdown>
                <small *ngIf="(department.invalid && validated) || (department.dirty && department.invalid)" class="p-error">Department is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Application Type</label>
                <p-dropdown [options]="applicationTypes" placeholder="Select an Application Type" optionLabel="name" [(ngModel)]="selectedApplicationType" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" #applicationType="ngModel" [ngClass]="{'ng-dirty': (applicationType.invalid && validated) || (applicationType.dirty && applicationType.invalid)}" required [disabled]="true"></p-dropdown>
                <small *ngIf="(applicationType.invalid && validated) || (applicationType.dirty && applicationType.invalid)" class="p-error">Application Type is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Programme</label>
                <p-dropdown [options]="programmes" placeholder="Select a Programme" optionLabel="name" [(ngModel)]="selectedProgramme" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="programmeChange($event.value)" #programme="ngModel" [ngClass]="{'ng-dirty': (programme.invalid && validated) || (programme.dirty && programme.invalid)}" required [disabled]="true"></p-dropdown>
                <small *ngIf="(programme.invalid && validated) || (programme.dirty && programme.invalid)" class="p-error">Programme is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Financial Year</label>
                <p-dropdown [options]="financialYears" placeholder="Select a Financial Year" optionLabel="name" [(ngModel)]="selectedFinancialYear" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="financialYearChange($event.value)" #financialYear="ngModel" [ngClass]="{'ng-dirty': (financialYear.invalid && validated) || (financialYear.dirty && financialYear.invalid)}" required [disabled]="true"></p-dropdown>
                <small *ngIf="(financialYear.invalid && validated) || (financialYear.dirty && financialYear.invalid)" class="p-error">Financial Year is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Sub-Programme</label>
                <p-dropdown [options]="subProgrammes" placeholder="Select a Sub-Programme" optionLabel="name" [(ngModel)]="selectedSubProgramme" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" #subProgramme="ngModel" [ngClass]="{'ng-dirty': (subProgramme.invalid && validated) || (subProgramme.dirty && subProgramme.invalid)}" required [disabled]="true"></p-dropdown>
                <small *ngIf="(subProgramme.invalid && validated) || (subProgramme.dirty && subProgramme.invalid)" class="p-error">Sub-Programme is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Opening Date</label>
                <p-calendar [(ngModel)]="applicationPeriod.openingDate" [showTime]="true" inputId="time" [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" (onSelect)="openingDateSelected($event)" [disabled]="disableOpeningDate" [minDate]="openingMinDate" #openingDate="ngModel" [ngClass]="{'ng-dirty': (openingDate.invalid && validated) || (openingDate.dirty && openingDate.invalid)}" required [monthNavigator]="true" [yearNavigator]="true" [yearRange]="finYearRange" [disabled]="true"></p-calendar>
                <small *ngIf="(openingDate.invalid && validated) || (openingDate.dirty && openingDate.invalid)" class="p-error">Opening Date is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Name</label>
                <input type="text" class="form-text" pInputText [(ngModel)]="applicationPeriod.name" [ngModelOptions]="{standalone: true}" #applicationName="ngModel" [ngClass]="{'ng-dirty': (applicationName.invalid && validated) || (applicationName.dirty && applicationName.invalid)}" required [disabled]="true">
                <small *ngIf="(applicationName.invalid && validated) || (applicationName.dirty && applicationName.invalid)" class="p-error">Name is required.</small>
            </div>
            <div class="p-field p-col-12 p-md-6">
                <label class="mandatory-content">Closing Date</label>
                <p-calendar [(ngModel)]="applicationPeriod.closingDate" [showTime]="true" inputId="time" [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" (onSelect)="closingDateSelected($event)" [disabled]="disableClosingDate" [minDate]="closingMinDate" #closingDate="ngModel" [ngClass]="{'ng-dirty': (closingDate.invalid && validated) || (closingDate.dirty && closingDate.invalid)}" required [monthNavigator]="true" [yearNavigator]="true" [yearRange]="finYearRange" [disabled]="true"></p-calendar>                
                <small *ngIf="(closingDate.invalid && validated) || (closingDate.dirty && closingDate.invalid)" class="p-error">Closing Date is required.</small>
            </div>

            <div class="p-field p-col-12 p-md-3">
                <label class="mandatory-content">District Council</label>              
                <p-dropdown [options]="allDistrictCouncils" placeholder="Select a District Council" optionLabel="name" 
                [(ngModel)]="selectedDistrictCouncil" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" 
                (onChange)="OnDistrictCouncilChange($event.value)"></p-dropdown>

            </div>
         
            <div class="p-field p-col-12 p-md-3">
                <label class="mandatory-content">Local Municipalities</label>
                <p-dropdown [options]="localMunicipalities" defaultLabel="Select option(s)" 
               optionLabel="name" [(ngModel)]="selectedLocalMunicipality" [ngModelOptions]="{standalone: true}" placeholder="Select Local Municipalities"
               [style]="{'width':'100%'}" appendTo="body" (onChange)="onLocalMunicipalityChange($event.value)"
               selectedItemsLabel="{0} items selected"></p-dropdown>
            </div>   

            <div class="p-field p-col-12 p-md-3">
                <label class="mandatory-content">Region</label>
                <p-multiSelect defaultLabel="Choose"  optionLabel="name" [options]="regions" [(ngModel)]="selectedRegions"
                 [ngModelOptions]="{standalone: true}" appendTo="body" (onChange)="onRegionChange($event.value)"
                 [style]="{'width':'100%'}" ></p-multiSelect> 
            </div>            
          

            <div class="p-field p-col-12 p-md-3">
                <label class="mandatory-content">Service Delivery Area</label>
                <p-multiSelect defaultLabel="Choose"  optionLabel="name" [options]="sdas" [ngModelOptions]="{standalone: true}" 
                appendTo="body" [(ngModel)]="selectedSdas"  (onChange)="onSdaChange($event.value)" 
                 [style]="{'width':'100%'}" ></p-multiSelect> 
            </div>     
        </div>
        <!-- <div class="p-field p-col-12 p-md-6">
            <label class="mandatory-content">Amount You Applying For</label>
        <p-inputNumber [(ngModel)]="fundingApplicationDetails.amountApplyingFor" 
            inputId="minmaxfraction" mode="decimal" [minFractionDigits]="2" [maxFractionDigits]="2" 
            [style]="{'width':'100%'}" #amount="ngModel" [
            ngClass]="{'ng-dirty': (amount.invalid && validated) || (amount.dirty && amount.invalid)}" required>
        </p-inputNumber>
        </div> -->
        <div class="p-field p-col-12 p-md-6">
            <label class="mandatory-content">Rand amount you applying for</label>
            <input type="text" class="form-text" pKeyFilter="int" pInputText name="amountApplyingFor" id="amountApplyingFor"
              (ngModelChange)="onAmountChange($event)" [(ngModel)]="Amount" [ngModelOptions]="{standalone: true}"
              [ngModelOptions]="{standalone: true}" autofocus autocomplete="off"/>        
        </div>   
    </p-panel>
    <div style="height: 10px;"></div>
    <div class="p-grid p-nogutter p-justify-between">
      <p-button label="Back" (onClick)="prevPage()" icon="fa fa-angle-left"></p-button>
      <p-button label="Next" (onClick)="nextPage()" icon="fa fa-angle-right" iconPos="right"></p-button>
    </div>
</p-panel>
