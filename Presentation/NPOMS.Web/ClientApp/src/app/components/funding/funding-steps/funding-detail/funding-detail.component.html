<p-toast></p-toast>
<p-panel [style]="{'font-size':'12px'}" header="Funding Details">
    <div class="p-grid">
        <div class="p-col-6">
            <div class="p-fluid">
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Organisation</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-autoComplete appendTo="body" id="selectedNpo"
                            [(ngModel)]="selectedNpo"
                            [style]="{'width':'100%'}"
                            [inputStyle]="{'width':'100%'}"
                            [suggestions]="npos"
                            field="name"
                            (completeMethod)="search($event)"
                            [size]="20"
                            placeholder="Find Organisation (type 4 letters)"
                            [forceSelection]="true"
                            [minLength]="4"
                            [showTransitionOptions]="'0ms'"
                            [hideTransitionOptions]="'0ms'"
                            emptyMessage="No results found"
                            name="npo"
                            [showEmptyMessage]="true"
                            (onSelect)="npoChange()"
                            #organisation="ngModel" [ngClass]="{'ng-dirty': (organisation.invalid && validated) || (organisation.dirty && organisation.invalid)}" required>
                        </p-autoComplete>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Financial Year</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-dropdown [options]="financialYears" placeholder="Select a Financial Year" optionLabel="name" [(ngModel)]="selectedFinancialYear" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="financialYearChange()" #financialYear="ngModel" [ngClass]="{'ng-dirty': (financialYear.invalid && validated) || (financialYear.dirty && financialYear.invalid)}" required></p-dropdown>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Start Date</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-calendar [(ngModel)]="date1" placeholder="Select a Start Date" inputId="time" [ngModelOptions]="{standalone: true}" dateFormat="yy-mm-dd" appendTo="body" [style]="{'width':'100%'}" #startDate="ngModel" [ngClass]="{'ng-dirty': (startDate.invalid && validated) || (startDate.dirty && startDate.invalid)}" required></p-calendar>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Programme</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-dropdown [options]="filteredProgrammes" placeholder="Select a Programme" optionLabel="name" [(ngModel)]="selectedProgramme" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="programmeChange()" #programme="ngModel" [ngClass]="{'ng-dirty': (programme.invalid && validated) || (programme.dirty && programme.invalid)}" required></p-dropdown>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Sub-Programme</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-dropdown [options]="subProgrammes" placeholder="Select a Sub-Programme" optionLabel="name" [(ngModel)]="selectedSubProgramme" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="subProgrammeChange()" #subProgramme="ngModel" [ngClass]="{'ng-dirty': (subProgramme.invalid && validated) || (subProgramme.dirty && subProgramme.invalid)}" required></p-dropdown>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Sub-Programme Type</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-dropdown [options]="subProgrammeTypes" placeholder="Select a Sub-Programme Type" optionLabel="name" [(ngModel)]="selectedSubProgrammeType" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" (onChange)="subProgrammeTypeChange()" #subProgrammeType="ngModel" [ngClass]="{'ng-dirty': (subProgrammeType.invalid && validated) || (subProgrammeType.dirty && subProgrammeType.invalid)}" required></p-dropdown>
                    </div>
                </div>
            </div>
        </div>
        <div class="p-col-6">
            <div class="p-fluid">
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Payment Frequency</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-dropdown [options]="frequencies" placeholder="Select a Payment Frequency" optionLabel="name" [(ngModel)]="selectedFrequency" [ngModelOptions]="{standalone: true}" [style]="{'width':'100%'}" appendTo="body" #frequency="ngModel" [ngClass]="{'ng-dirty': (frequency.invalid && validated) || (frequency.dirty && frequency.invalid)}" required></p-dropdown>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Allow Variable Funding</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-checkbox [(ngModel)]="variableFunding" binary="true" inputId="binary"></p-checkbox>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Allow Claims</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-checkbox [(ngModel)]="claims" binary="true" inputId="binary"></p-checkbox>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="mandatory-content">Amount Awarded</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <p-inputNumber [(ngModel)]="amountAwarded" inputId="minmaxfraction" mode="decimal" [minFractionDigits]="2" [maxFractionDigits]="2" [style]="{'width':'100%'}" #amount="ngModel" [ngClass]="{'ng-dirty': (amount.invalid && validated) || (amount.dirty && amount.invalid)}" required></p-inputNumber>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="p-grid">
        <div class="p-col-6">
            <div class="p-fluid">
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Programme Budget</span>
                        </div>
                    </div>
                    <div class="p-col">
                        <span *ngIf="programmeBudget">R {{programmeBudget.amount | number : '1.2-2'}}</span>
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Allocated Amount</span>
                        </div>
                    </div>
                    <div class="p-col">
                        
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">Programme Balance</span>
                        </div>
                    </div>
                    <div class="p-col">
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="p-col-6">
            <div class="p-fluid">                
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">TPA Allocated Amount</span>
                        </div>
                    </div>
                    <div class="p-col">
                        
                    </div>
                </div>
                <div class="p-grid">
                    <div class="p-col-fixed form-label">
                        <div class="box">
                            <span class="non-mandatory-content">TPA Paid</span>
                        </div>
                    </div>
                    <div class="p-col">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div style="height: 10px;"></div>
    <div class="p-grid p-nogutter p-justify-end">
        <p-button label="Next" (onClick)="nextPage()" icon="fa fa-angle-right" iconPos="right"></p-button>
    </div>
</p-panel>